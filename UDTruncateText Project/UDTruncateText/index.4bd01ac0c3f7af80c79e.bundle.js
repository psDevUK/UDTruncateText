var udtruncatetext=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t){e.exports=react},function(e,t,n){window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function o(e){var t,n;for(t=1;t<arguments.length;t++)n=null!=arguments[t]?arguments[t]:{},t%2?r(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))});return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n,r,o=[],i=!0,a=!1,u=void 0;try{for(n=e[Symbol.iterator]();!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){a=!0,u=e}finally{try{i||null==n.return||n.return()}finally{if(a)throw u}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){var n,r;for((null==t||t>e.length)&&(t=e.length),n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.r(t),n.d(t,"withComponentFeatures",function(){return c}),n.d(t,"registerComponent",function(){return l});var c=function(e){var t=function(e,t){return new Promise(function(n){UniversalDashboard.post("/api/internal/component/element/".concat(e),t,function(e){n(e)})})},n=function(e,t){return UniversalDashboard.subscribe(e,function(e,n){var r=n.type;"requestState"===r&&(r="getState"),t(r,n)})},r=function(e){UniversalDashboard.unsubscribe(e)},i=function(e,t){var n;return n=e,"[object String]"!==Object.prototype.toString.call(n)&&(e.__version||(e.__version="0"),!t&&e.history&&(t=e.history)),UniversalDashboard.renderComponent(e,t)};return function(u){var c=a(react.useState(u),2),l=c[0],s=c[1];react.useEffect(function(){s(u)},[u.__version]);var f=function(e,t){var n,r;if("setState"===e&&s(o(o({},l),t.state)),"getState"===e&&(n=t.requestId,r=l,new Promise(function(e,t){UniversalDashboard.post("/api/internal/component/element/sessionState/".concat(n),r,function(n){n.error?t(n.error.message):e(n)})})),"addElement"===e){var i=l.children;null==i&&(i=[]),i=i.concat(t.elements),s(o(o({},l),{},{children:i}))}"clearElement"===e&&s(o(o({},l),{},{children:[]})),"removeElement"===e&&s(o(o({},l),{},{hidden:!0})),"syncElement"===e&&s(o(o({},l),{},{__version:Math.random().toString(36).substr(2,5)}))};react.useEffect(function(){var e=n(u.id,f);return function(){r(e)}});var p={render:i,setState:function(e){var t=o(o({},l),e);s(t)},publish:UniversalDashboard.publish,notifyOfEvent:function(e,t){UniversalDashboard.publish("element-event",{type:"clientEvent",eventId:u.id+e,eventName:e,eventData:t})},post:t,subscribeToIncomingEvents:n,unsubscribeFromIncomingEvents:r};return Object.keys(l).forEach(function(e){null!=l[e]&&l[e].endpoint&&(p[e]=function(t){var n={};return l[e].accept&&""!==l[e].accept&&(n.Accept=l[e].accept),l[e].contentType&&""!==l[e].contentType&&(n["Content-Type"]=l[e].contentType),function(e,t,n){return new Promise(function(r){UniversalDashboard.postWithHeaders("/api/internal/component/element/".concat(e),t,function(e){r(e)},n)})}(l[e].name,t,n)})}),l.hidden?react.createElement(react.Fragment):e(o(o({},l),p))}},l=function(e,t){UniversalDashboard.register(e,t)}}])},function(e,t,n){"use strict";var r,o,i;o=[t,n(0),n(3)],void 0===(i="function"==typeof(r=function(t,n,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n),i=a(r);function a(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e,t){return Math.abs(e-t)<1e-4},y=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return d(f(n=function(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?f(e):t}(this,(e=s(t)).call.apply(e,[this].concat(o)))),"onResize",function(){n.rafId&&window.cancelAnimationFrame(n.rafId),n.rafId=window.requestAnimationFrame(n.update.bind(f(n)))}),d(f(n),"onToggled",function(e){"function"==typeof n.props.onToggled&&setTimeout(function(){return n.props.onToggled(e)},0)}),d(f(n),"onTruncated",function(){"function"==typeof n.props.onTruncated&&setTimeout(function(){return n.props.onTruncated()},0)}),d(f(n),"onCalculated",function(){"function"==typeof n.props.onCalculated&&setTimeout(function(){return n.props.onCalculated()},0)}),d(f(n),"update",function(){var e=window.getComputedStyle(n.scope),t=[e["font-weight"],e["font-style"],e["font-size"],e["font-family"],e["letter-spacing"]].join(" ");n.canvas.font=t,n.forceUpdate()}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),function(e,t,n){t&&l(e.prototype,t),n&&l(e,n)}(t,[{key:"componentDidMount",value:function(){var e=document.createElement("canvas"),t=document.createDocumentFragment(),n=window.getComputedStyle(this.scope),r=[n["font-weight"],n["font-style"],n["font-size"],n["font-family"]].join(" ");t.appendChild(e),this.canvas=e.getContext("2d"),this.canvas.font=r,this.forceUpdate(),window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize),this.rafId&&window.cancelAnimationFrame(this.rafId)}},{key:"measureWidth",value:function(e){return this.canvas.measureText(e).width}},{key:"getRenderText",value:function(){var e=this.props,t=(e.containerClassName,e.element,e.line),r=(e.onCalculated,e.onTruncated,e.onToggled,e.text),i=e.textElement,a=e.textTruncateChild,u=e.truncateText,l=e.maxCalculateTimes,s=c(e,["containerClassName","element","line","onCalculated","onTruncated","onToggled","text","textElement","textTruncateChild","truncateText","maxCalculateTimes"]),f=this.scope.getBoundingClientRect().width;if(0===f)return null;var p=this.measureWidth(r);if(f>p||m(f,p))return this.onToggled(!1),(0,n.createElement)(i,s,r);var d="";if(a&&"string"==typeof a.type){var y=a.type;(y.indexOf("span")>=0||y.indexOf("a")>=0)&&(d=a.props.children)}for(var b=1,h=r.length,v="",g=0,O=0,T=t,x=0,w=!1,j=!1,S=0,C=-1,E="",_=0;T-- >0;){for(E=T?"":u+(d?" "+d:"");b<=h;){if(v=r.substr(O,b),!((x=this.measureWidth(v+E))<f)){do{if(_++>=l)break;v=r.substr(O,b),T||b--," "===v[v.length-1]&&(v=r.substr(O,b-1)),w&&(C=v.lastIndexOf(" "))>-1?(b=C,T&&b++,v=r.substr(O,b)):(b--,v=r.substr(O,b)),x=this.measureWidth(v+E)}while((x>f||m(x,f))&&v.length>0);O+=b;break}-1===(g=r.indexOf(" ",b+1))?(b+=1,w=!1):(w=!0,b=g)}if(b>=h){O=h;break}w&&!j&&-1===r.substr(S,b).indexOf(" ")&&(j=-1===r.substr(S,b).indexOf(" "),T--),S=b+1}return O===h?(this.onToggled(!1),(0,n.createElement)(i,s,r)):(this.onTruncated(),this.onToggled(!0),o.default.createElement("span",s,(0,n.createElement)(i,s,r.substr(0,O)+u+" "),a))}},{key:"render",value:function(){var e=this,t=this.props,r=t.element,o=t.text,i=t.style,a=void 0===i?{}:i,u=t.containerClassName,l=t.line,s=(t.onCalculated,t.onTruncated,t.onToggled,t.textElement),f=(t.textTruncateChild,t.truncateText,t.maxCalculateTimes,c(t,["element","text","style","containerClassName","line","onCalculated","onTruncated","onToggled","textElement","textTruncateChild","truncateText","maxCalculateTimes"])),p=a.fontWeight,d=a.fontStyle,m=a.fontSize,y=a.fontFamily,b=this.scope&&l?this.getRenderText():(0,n.createElement)(s,f,o),h={ref:function(t){e.scope=t},className:u,style:{overflow:"hidden",fontWeight:p,fontStyle:d,fontSize:m,fontFamily:y}};return this.scope&&this.onCalculated(),(0,n.createElement)(r,h,b)}}]),t}(n.Component);d(y,"propTypes",{containerClassName:i.default.string,element:i.default.string,line:i.default.oneOfType([i.default.number,i.default.bool]),onCalculated:i.default.func,onTruncated:i.default.func,onToggled:i.default.func,text:i.default.string,textElement:i.default.elementType,textTruncateChild:i.default.node,truncateText:i.default.string,maxCalculateTimes:i.default.number}),d(y,"defaultProps",{element:"div",line:1,text:"",textElement:"span",truncateText:"…",maxCalculateTimes:10}),t.default=y,e.exports=t.default})?r.apply(t,o):r)||(e.exports=i)},function(e,t,n){e.exports=n(4)()},function(e,t,n){"use strict";var r=n(5);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,a){if(a!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(1),a=n(2),u=n.n(a),c=Object(i.withComponentFeatures)(function(e){return o.a.createElement(u.a,{key:e.id,line:e.line,element:"span",truncateText:e.truncateText,text:e.text,textTruncateChild:o.a.createElement("a",{href:e.href},e.readon)})});UniversalDashboard.register("udtruncatetext",c)}]);
//# sourceMappingURL=index.4bd01ac0c3f7af80c79e.bundle.map